<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¯ LÄƒng kÃ­nh ngÆ°á»i tiÃªu dÃ¹ng</title>
<style>
  body { font-family:"Segoe UI",Arial,sans-serif; background:linear-gradient(120deg,#fff8dc,#ffe4e6); text-align:center; margin:0; padding:20px;}
  h1 { color:#6d28d9; }
  #game-container { background:white; border-radius:20px; box-shadow:0 4px 10px rgba(0,0,0,0.15); display:inline-block; padding:20px; max-width:500px; width:100%; }
  img { max-width:100%; border-radius:15px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  button { padding:10px 20px; border:none; border-radius:10px; margin:5px; background-color:#7c3aed; color:white; font-weight:bold; cursor:pointer; transition:0.3s;}
  button:hover { background-color:#5b21b6;}
  select { padding:10px; border-radius:8px; border:1px solid #ccc; width:80%; margin-top:5px; margin-bottom:10px;}
  #result{font-size:18px;font-weight:bold;margin-top:15px;}
  #score{font-size:18px;font-weight:bold;color:#16a34a;margin-top:10px;}
  #timer{font-size:18px;font-weight:bold;color:#dc2626;margin-bottom:10px;}
</style>
</head>
<body>

<h1>ğŸ­ LÄƒng kÃ­nh ngÆ°á»i tiÃªu dÃ¹ng</h1>

<div id="menu">
  <h2>Chá»n cháº¿ Ä‘á»™ chÆ¡i</h2>
  <button onclick="startGame('sanpham')">ğŸ¥¯ Lá»—i sáº£n pháº©m</button>
  <button onclick="startGame('baobi')">ğŸ“¦ Lá»—i bao bÃ¬</button>
</div>

<div id="game-container" style="display:none;">
  <div id="timer">Thá»i gian: 10s</div>
  <img id="biscuitImage" src="" alt="áº¢nh lá»—i QC">
  <div>
    <button onclick="checkAnswer(true)">âœ… Äáº¡t</button>
    <button onclick="checkAnswer(false)">âŒ Lá»—i</button>
  </div>

  <div id="errorSection" style="display:none;">
    <p>Chá»n loáº¡i lá»—i:</p>
    <select id="errorSelect"></select>
    <br>
    <button onclick="submitError()">XÃ¡c nháº­n</button>
  </div>

  <div id="result"></div>
  <div id="score">Äiá»ƒm: 0</div>
  <br>
  <button onclick="nextImage()">ğŸ‘‰ áº¢nh tiáº¿p theo</button>
</div>

<script>
const baseURL = "Anh/"; // Folder chá»©a áº£nh trÃªn GitHub

// === Lá»—i sáº£n pháº©m ===
const productErrors = [
  { src:"Banh_Be_Vo.webp", correctError:"BÃ¡nh bá»ƒ vá»¡" },
  { src:"Banh_Khuyet.webp", correctError:"BÃ¡nh khuyáº¿t" },
  { src:"Banh_Loi_Cong_Dau.webp", correctError:"BÃ¡nh cong Ä‘áº§u" },
  { src:"Banh_Loi_Dinh_Nhau.webp", correctError:"BÃ¡nh dÃ­nh nhau" },
  { src:"Banh_Loi_Khong_Dau.webp", correctError:"BÃ¡nh khÃ´ng dáº§u" },
  { src:"Banh_Mau_Sac_Khong_Dat.webp", correctError:"MÃ u sáº¯c khÃ´ng Ä‘áº¡t" },
  { src:"Banh_Rop_Mat.webp", correctError:"Rá»™p máº·t" },
  { src:"Banh_Sut_Mat_Mieng.webp", correctError:"Sá»©t máº¥t miáº¿ng" }
];

// === Lá»—i bao bÃ¬ Ä‘áº§y Ä‘á»§ ===
const packagingErrors = [
  { src:"Bang_Keo_Nhan_Khong_Du_Chieu_Dai.webp", correctError:"BÄƒng keo nhÄƒn khÃ´ng Ä‘á»§ chiá»u dÃ i" },
  { src:"Bang_Keo_Noi_Cuon.webp", correctError:"BÄƒng keo ná»‘i cuá»™n" },
  { src:"Can_Trang.webp", correctError:"Cáº¥n tráº¯ng" },
  { src:"Dan_Lech.webp", correctError:"DÃ¡n lá»‡ch" },
  { src:"Duong_Han_Bi_Hu_Hai.webp", correctError:"ÄÆ°á»ng hÃ n bá»‹ hÆ° háº¡i" },
  { src:"Duong_Han_Can_Rach.webp", correctError:"ÄÆ°á»ng hÃ n cáº¥n rÃ¡ch" },
  { src:"Duong_Han_Qua_Nhiet.webp", correctError:"ÄÆ°á»ng hÃ n quÃ¡ nhiá»‡t" },
  { src:"Duong_Han_Yeu.webp", correctError:"ÄÆ°á»ng hÃ n yáº¿u" },
  { src:"Hop_Bi_Ho.webp", correctError:"Há»™p bá»‹ há»Ÿ" },
  { src:"Hop_Bung_Keo.webp", correctError:"Há»™p bung keo" },
  { src:"Hop_Dan_Tho_Tai.webp", correctError:"Há»™p dÃ¡n thÃ´ táº¡i" },
  { src:"Hop_Lem_Keo.webp", correctError:"Há»™p lem keo" },
  { src:"Kep_Banh_Duong_Han.webp", correctError:"Káº¹p bÃ¡nh Ä‘Æ°á»ng hÃ n" },
  { src:"Khe_Ho_Nap_Thung.webp", correctError:"Khe há»Ÿ náº¯p thÃ¹ng" },
  { src:"Lech_Bao_Bi.webp", correctError:"Lá»‡ch bao bÃ¬" },
  { src:"Lech_Nap_Thung.webp", correctError:"Lá»‡ch náº¯p thÃ¹ng" },
  { src:"Mop_Gay_Hop.webp", correctError:"MÃ³p gÃ£y há»™p" },
  { src:"Rach_Goc_Hop.webp", correctError:"RÃ¡ch gÃ³c há»™p" },
  { src:"Sai_Date_Code.webp", correctError:"Sai date code" },
  { src:"Sai_Date_Thung.webp", correctError:"Sai date thÃ¹ng" },
  { src:"Sai_Quy_Cach_Xep.webp", correctError:"Sai quy cÃ¡ch xáº¿p" },
  { src:"Thieu_Banh.webp", correctError:"Thiáº¿u bÃ¡nh" },
  { src:"Thieu_Thung_Tren_Palet.webp", correctError:"Thiáº¿u thÃ¹ng trÃªn pallet" },
  { src:"Thung_Mop_Meo.webp", correctError:"ThÃ¹ng mÃ³p mÃ©o" },
  { src:"Tray_Xuoc_Hop.webp", correctError:"Tray xÆ°á»›c há»™p" },
  { src:"Xep_Ly.webp", correctError:"Xáº¿p ly" },
  { src:"Xep_Ly_xi.webp", correctError:"Xáº¿p ly xá»‰" }
];

// === áº¢nh sáº£n pháº©m Ä‘áº¡t ===
const goodProducts = [
  { src:"Banh_Dat_1.webp", isGood:true },
  { src:"Banh_Dat_2.webp", isGood:true }
];

const errorOptions = {
  sanpham: productErrors.map(e=>e.correctError),
  baobi: packagingErrors.map(e=>e.correctError)
};

let images = [], mode="", current=0, score=0, answered=false, timeLeft=10, timerInterval;

const imgElement=document.getElementById("biscuitImage");
const resultElement=document.getElementById("result");
const errorSection=document.getElementById("errorSection");
const scoreElement=document.getElementById("score");
const timerElement=document.getElementById("timer");
const menu=document.getElementById("menu");
const gameContainer=document.getElementById("game-container");
const errorSelect=document.getElementById("errorSelect");

function shuffleArray(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}}

function startGame(selectedMode){
  mode=selectedMode;
  images=(mode==="sanpham"?productErrors:packagingErrors)
    .map(img=>({...img, src: baseURL+img.src, isGood:false}));

  // ThÃªm sáº£n pháº©m Ä‘áº¡t chá»‰ khi cháº¿ Ä‘á»™ sáº£n pháº©m
  if(mode==="sanpham"){
    goodProducts.forEach(img=>images.push({...img, src: baseURL+img.src}));
  }

  shuffleArray(images);

  // Preload áº£nh
  images.forEach(img=>{const i=new Image();i.src=img.src;});

  menu.style.display="none";
  gameContainer.style.display="block";
  loadErrorOptions();
  loadImage();
}

function loadErrorOptions(){
  errorSelect.innerHTML="<option value=''>-- Chá»n loáº¡i lá»—i --</option>";
  errorOptions[mode].forEach(opt=>{
    const option=document.createElement("option");
    option.value=opt; option.textContent=opt;
    errorSelect.appendChild(option);
  });
}

function startTimer(){
  timerElement.textContent=`Thá»i gian: ${timeLeft}s`;
  timerInterval=setInterval(()=>{
    timeLeft--;
    timerElement.textContent=`Thá»i gian: ${timeLeft}s`;
    if(timeLeft<=0){
      clearInterval(timerInterval);
      resultElement.textContent="â° Háº¿t thá»i gian!";
      answered=true;
      errorSection.style.display="none";
    }
  },1000);
}

function checkAnswer(isGoodSelected){
  if(answered) return;
  const currentImg=images[current];
  if(currentImg.isGood && isGoodSelected){
    resultElement.textContent="ğŸ‰ ChÃ­nh xÃ¡c! ÄÃ¢y lÃ  sáº£n pháº©m Ä‘áº¡t!";
    score++; scoreElement.textContent="Äiá»ƒm: "+score;
    answered=true; clearInterval(timerInterval);
  } else if(!currentImg.isGood && !isGoodSelected){
    resultElement.textContent="â— ÄÃ¢y lÃ  lá»—i, hÃ£y chá»n loáº¡i lá»—i!";
    errorSection.style.display="block";
  } else {
    resultElement.textContent="âŒ Sai rá»“i!";
    errorSection.style.display="none";
  }
}

function submitError(){
  const selected=errorSelect.value;
  const currentImg=images[current];
  if(!selected){ resultElement.textContent="âš ï¸ HÃ£y chá»n loáº¡i lá»—i!"; return;}
  if(selected===currentImg.correctError){
    resultElement.textContent="âœ… ChÃ­nh xÃ¡c! Báº¡n Ä‘Ã£ xÃ¡c Ä‘á»‹nh Ä‘Ãºng loáº¡i lá»—i.";
    score++;
  } else { resultElement.textContent="âŒ Sai loáº¡i lá»—i.";}
  scoreElement.textContent="Äiá»ƒm: "+score;
  answered=true;
  errorSection.style.display="none";
  clearInterval(timerInterval);
}

function nextImage(){
  if(current<images.length-1){ current++; loadImage();}
  else { showFinalScore();}
}

function loadImage(){
  const currentImg=images[current];
  imgElement.src=currentImg.src;
  resultElement.textContent="";
  errorSection.style.display="none";
  errorSelect.value="";
  answered=false;
  clearInterval(timerInterval);
  timeLeft=10;
  startTimer();
}

function showFinalScore(){
  clearInterval(timerInterval);
  gameContainer.innerHTML=`
    <h2>ğŸ‰ HoÃ n thÃ nh!</h2>
    <p>Äiá»ƒm cá»§a báº¡n: <strong>${score}/${images.length}</strong></p>
    <button onclick="location.reload()">ğŸ”„ ChÆ¡i láº¡i</button>
  `;
}
</script>

</body>
</html>
